{include file="$include_tpl/includes/head.html"}
	<!--sidebar-->
	{include file="$include_tpl/includes/sidebar.html"}
	<!--/sidebar-->
	<!--Page Container-->
	<section class="main-container">	
			<!--Page Header-->
			<div class="header">
				<div class="header-content">
					<div class="page-title">
						<i class="icon-table position-left"></i> {$title}
					</div>
					<ul class="breadcrumb">
						<li><a href="{$adminweburl}">Beranda</a></li>
						<li><a href="{$adminweburl}/dashboard/">{$title}</a></li>
						<li class="active">{$sub_title}</li>
					</ul>					
				</div>
			</div>		
			<!--/Page Header-->
			
			<div class="container-fluid page-content">				
				<div class="row">
					<div class="col-md-12">
						<div class="panel panel-flat">
							<div class="panel-heading">
								<h3 class="panel-title"><strong>{$title}</strong></h3>				
								<h5 class="panel-title">{$sub_title}</h5>				
							</div>

							<div class="panel panel-flat">
								<div class="form-group panel-body no-padding-bottom">
									<div class="row">                    

														<div id="alert_error" class="form-group" style="display: none;">

															<div class="alert alert-danger">&nbsp;</div>

														</div>



                                                <div class="form-group">
                                                    <label for="judul">Judul:</label>
                                                    <input type="text" value="{$data[0].judul}" class="form-control" name="judul" placeholder="" />
                                                </div>

                                                <div class="form-group">
                                                    <label for="tanggal">Tanggal:</label>
                                                    <input type="text" value="{$data[0].tanggal}" class="form-control tanggal" name="tanggal" />
                                                </div>

                                                <div class="form-group">
                                                    <label for="kategori">Kategori:</label>
                                                    <select class="form-control" name="kategori_id">
                                                        {foreach $datacategory as $entry}
                                                            <option style="font-weight: bold;" value="{$entry.id}" {if $isEdit eq true && $entry.id eq $data[0].kategori_id} selected="selected" {/if}>{$entry.nama}</option>                                        
                                                        {/foreach}                            
                                                    </select>
                                                </div>

                                                <div class="form-group">
                                                    <label class="control-label"><input type="checkbox" name="is_new" {if $isEdit eq true && $data[0].is_new eq 1}checked{/if} /> Atur sebagai Berita Terbaru.</label><br />
                                                </div>
                                                                            
                                                <div class="form-group">
                                                    <label for="konten">News:</label>
                                                    <div class="summernote"></div>
                                                </div>
                                                                            
                                                <div class="form-group">
                                                    <label for="file_gambar">Gambar: (hanya file png, jpg atau gif)</label>
                                                    <div>
                                                        <input type="file" id="fileupload_gambar" name="fileupload_gambar" style="display:none;"  />
                                                        <div id="upload_file_gambar" class="btn btn-primary">Upload File</div>
                                                        <div id="alert_file_gambar" class="alert-danger" style="padding: 10px; margin-top: 10px; display: none;">&nbsp;</div>
                                                        <div id="pgbar_file_gambar" class="progress active" style=" margin-top: 10px; display: none;">
                                                            <div id="pgbar_file_gambar_progress" class="progress-bar progress-bar-primary progress-bar-striped" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="width: 70%">
                                                              <span id="pgbar_file_gambar_label">20% Complete</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <img id="preview_gambar_file_gambar" src="{$homeurl}/uploads/kartanews/{$data[0].file_gambar}" style="width: 50%;" alt="{$data[0].file_gambar}" />
                                                    <span id="pgbar_file_gambar_filename" style="display: none;">{$data[0].file_gambar}</span>
                                                    <input type="hidden" id="hidden_file_gambar_filename" name="hidden_file_gambar_filename" />
                                                </div>



														<div class="form-group">

															<table>

																<tbody>

																	<tr>

																		<td width="100%">&nbsp;</td> 

																		<td nowrap>

																			<div id="i_loading" class="G-btn-animation" style="display: none;"><img src="{$tpl_dir}/assets/img/loading.gif" /></div>                  

																			<div id="btn_submit"  class="btn btn-primary">Simpan</div>

																			<a id="btn_batal"  href="list.php" class="btn btn-warning">Batal</a>                                                        

																		</td>

																	</tr>

																</tbody>                                

															</table>

														</div>

													</div>								
								</div>
							</div>
						</div>
					</div>
				</div>
	
			<!--Rightbar Chat-->
			<aside class="rightbar">
				<div class="rightbar-container">
					<div class="right-chat-bar">
						<div class="coversation-header">
							<div class="chat-back" data-popup="tooltip" data-placement="left" title="Back">
								<i class="icon-arrow-left12"></i>
							</div>
							<div class="active-conversation">
								<div class="chat-avatar">
									<img src="assets/images/faces/face12.png" alt="user">
								</div>
								<div class="chat-user-status">
									<ul>
										<li class="text-semibold"> John Parker</li>
										<li><small>Online</small></li>
									</ul>
								</div>
							</div>
							<div class="conversation-actions">
								<ul>
									<li><i class="icon-phone-wave" data-popup="tooltip" data-placement="bottom" title="Call"></i></li>
									<li><i class="icon-attachment" data-popup="tooltip" data-placement="bottom" title="Send file"></i></li>
									<li><i class="icon-mic2" data-popup="tooltip" data-placement="bottom" title="Send voice"></i></li>
									<li><i class="icon-user-block" data-popup="tooltip" data-placement="bottom" title="Block"></i></li>					
								</ul>
							</div>
						</div>
						<div class="conversation-container">
							<div class="conversation-row even">
								<ul class="conversation-list">
									<li>
										<p>
											Lorem ipsum dolor sit amet?
										</p>
									</li>							
								</ul>
							</div>
							<div class="conversation-row odd">
								<ul class="conversation-list">
									<li>
										<p>
											Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus
										</p>
									</li>
								</ul>
							</div>
							<div class="conversation-row even">
								<ul class="conversation-list">
									<li>
										<p>
											Maecenas nec odio et ante tincidunt tempus. 
										</p>
									</li>
								</ul>
							</div>
							<div class="conversation-row even">
								<ul class="conversation-list">
									<li>						
										<a href="assets/images/demo/pic7.jpg" class="venobox"><img src="assets/images/demo/pic7.jpg" alt=""/></a>
									</li>
								</ul>
							</div>
							<div class="conversation-row odd">
								<ul class="conversation-list">
									<li>
										<p>
											Donec sodales :)
										</p>
									</li>
								</ul>
							</div>
						</div>
						<div class="chat-text-input">			
							<div class="input-group">
								<input type="text" class="form-control input-xs" placeholder="Type a message...">
								<span class="input-group-btn">
								<button class="btn btn-default" type="button"><i class="icon-enter5"></i></button>
								</span>
							</div>
						</div>
					</div>
					
					<div class="chat-user-toolbar clearfix">
						<div class="chat-user-search pull-left">
							<span class="addon-icon"><i class="icon-search4"></i></span>
							<input type="text" class="form-control" placeholder="Search">
						</div>
						<div class="add-chat-list pull-right">
							<i class="icon-user-plus" data-toggle="tooltip" data-placement="left" title="Add new user"></i>
						</div>
					</div>
					
					<div class="chat-user-container">			
						<ul class="chat-user-list">
							<li>
								<div><span class="chat-avatar"><img src="assets/images/faces/face1.png" alt="Avatar"></span><span class="chat-u-info">Jane Elliott<cite>Li Europan lingues es...</cite></span>
								</div>
								<span class="chat-u-status"><i class="icon icon-circles"></i></span>
							</li>
							<li>
								<div><span class="chat-avatar"><img src="assets/images/faces/face2.png" alt="Avatar"></span><span class="chat-u-info">Florence Douglas<cite>Busy</cite></span>
								</div>
								<span class="chat-u-status"><i class="icon icon-circles"></i></span>
							</li>
							<li class="chat-u-online">
								<div><span class="chat-avatar"><img src="assets/images/faces/face3.png" alt="Avatar"></span><span class="chat-u-info">Jacqueline Howell<cite>Available</cite></span>
								</div>
								<span class="chat-u-status"><i class="icon icon-circles"></i></span>
							</li>
							<li class="chat-u-online">
								<div><span class="chat-avatar"><img src="assets/images/faces/face4.png" alt="Avatar"></span><span class="chat-u-info">Eugine Turner<cite>Occidental in fact...</cite></span>
								</div>
								<span class="chat-u-status"><i class="icon icon-circles"></i></span>
							</li>
							<li class="chat-u-busy">
								<div><span class="chat-avatar"><img src="assets/images/faces/face5.png" alt="Avatar"></span><span class="chat-u-info">Andrew Brewer<cite>Busy</cite></span>
								</div>
								<span class="chat-u-status"><i class="icon icon-circles"></i></span>
							</li>
							<li class="chat-u-away">
								<div><span class="chat-avatar"><img src="assets/images/faces/face6.png" alt="Avatar"></span><span class="chat-u-info">Jonaly Smith<cite>Available</cite></span>
								</div>
								<span class="chat-u-status"><i class="icon icon-circles"></i></span>
							</li>
							<li class="chat-u-online">
								<div><span class="chat-avatar"><img src="assets/images/faces/face7.png" alt="Avatar"></span><span class="chat-u-info">Ann Porter<cite>Available</cite></span>
								</div>
								<span class="chat-u-status"><i class="icon icon-circles"></i></span>
							</li>
							<li class="chat-u-away">
								<div><span class="chat-avatar"><img src="assets/images/faces/face8.png" alt="Avatar"></span><span class="chat-u-info">John Deo<cite>Do not disturb</cite></span>
								</div>
								<span class="chat-u-status"><i class="icon icon-circles"></i></span>
							</li>
							<li>
								<div><span class="chat-avatar"><img src="assets/images/faces/face9.png" alt="Avatar"></span><span class="chat-u-info">Marilyn Romero<cite>On refusa continuar payar...</cite></span>
								</div>
								<span class="chat-u-status"><i class="icon icon-circles"></i></span>
							</li>
							<li>
								<div><span class="chat-avatar"><img src="assets/images/faces/face10.png" alt="Avatar"></span><span class="chat-u-info">Carol Gibson<cite>Gone for a weekend</cite></span>
								</div>
								<span class="chat-u-status"><i class="icon icon-circles"></i></span>
							</li>
							<li>
								<div><span class="chat-avatar"><img src="assets/images/faces/face11.png" alt="Avatar"></span><span class="chat-u-info">Scott Ruiz<cite>At solmen va esser...</cite></span>
								</div>
								<span class="chat-u-status"><i class="icon icon-circles"></i></span>
							</li>
						</ul>						
					</div>		
				</div>
			</aside>
			<!--/Rightbar Chat-->
				
		</div>
	
		<!--Footer -->
		{include file="$include_tpl/includes/footer.html"}
		<!--/Footer-->
		
	</section>
	<!--/Page Container-->
	
	<!-- div class="theme-switcher">
		<span class="theme-switcher-icon">
			<i class="icon icon-color-sampler"></i>
		</span>
		
		<div class="themes-container">
			<ul class="switch-theme-colors clearfix">
				<li class="list-title">Light</li>
				<li>
					<div class="theme" id="light">
						<img src="{$tpl_dir}/assets/images/themes/light.jpg" alt=""/>
					</div>				
				</li>
				<li class="list-title clearfix">Mirage</li>
				<li>
					<div class="theme pull-left" id="mirage">
						<img src="{$tpl_dir}/assets/images/themes/mirage_dark.jpg" alt=""/>
					</div>				
				</li>			
				<li>
					<div class="theme pull-left" id="mirage_light">
						<img src="{$tpl_dir}/assets/images/themes/mirage_light.jpg" alt=""/>
					</div>				
				</li>
				<li>
					<div class="theme pull-left" id="mirage_light_sidebar">
						<img src="{$tpl_dir}/assets/images/themes/mirage_light_sidebar.jpg" alt=""/>
					</div>				
				</li>										
				<li class="list-title clearfix">Burnt Sienna</li>
				<li>
					<div class="theme pull-left" id="burnt_sienna_dark">
						<img src="{$tpl_dir}/assets/images/themes/burnt_sienna_dark.jpg" alt=""/>
					</div>				
				</li>			
				<li>
					<div class="theme pull-left" id="burnt_sienna_light">
						<img src="{$tpl_dir}/assets/images/themes/burnt_sienna_light.jpg" alt=""/>
					</div>				
				</li>
				<li>
					<div class="theme pull-left" id="burnt_sienna_light_sidebar">
						<img src="{$tpl_dir}/assets/images/themes/burnt_sienna_light_sidebar.jpg" alt=""/>
					</div>				
				</li>		

				<li class="list-title clearfix">Amethyst</li>
				<li>
					<div class="theme pull-left" id="amethyst_dark">
						<img src="{$tpl_dir}/assets/images/themes/amethyst_dark.jpg" alt=""/>
					</div>				
				</li>			
				<li>
					<div class="theme pull-left" id="amethyst_light">
						<img src="{$tpl_dir}/assets/images/themes/amethyst_light.jpg" alt=""/>
					</div>				
				</li>
				<li>
					<div class="theme pull-left" id="amethyst_light_sidebar">
						<img src="{$tpl_dir}/assets/images/themes/amethyst_light_sidebar.jpg" alt=""/>
					</div>				
				</li>		

				<li class="list-title clearfix">Fuchsia Blue</li>
				<li>
					<div class="theme pull-left" id="fuchsiablue_dark">
						<img src="{$tpl_dir}/assets/images/themes/fuchsiablue_dark.jpg" alt=""/>
					</div>				
				</li>			
				<li>
					<div class="theme pull-left" id="fuchsiablue_light">
						<img src="{$tpl_dir}/assets/images/themes/fuchsiablue_light.jpg" alt=""/>
					</div>				
				</li>
				<li>
					<div class="theme pull-left" id="fuchsiablue_light_sidebar">
						<img src="{$tpl_dir}/assets/images/themes/fuchsiablue_light_sidebar.jpg" alt=""/>
					</div>				
				</li>

				<li class="list-title clearfix">Picton Blue</li>
				<li>
					<div class="theme pull-left" id="pictonblue_dark">
						<img src="{$tpl_dir}/assets/images/themes/pictonblue_dark.jpg" alt=""/>
					</div>				
				</li>			
				<li>
					<div class="theme pull-left" id="pictonblue_light">
						<img src="{$tpl_dir}/assets/images/themes/pictonblue_light.jpg" alt=""/>
					</div>				
				</li>
				<li>
					<div class="theme pull-left" id="pictonblue_light_sidebar">
						<img src="{$tpl_dir}/assets/images/themes/pictonblue_light_sidebar.jpg" alt=""/>
					</div>				
				</li>
				
				<li class="list-title clearfix">Jungle Green</li>
				<li>
					<div class="theme pull-left" id="junglegreen_dark">
						<img src="{$tpl_dir}/assets/images/themes/junglegreen_dark.jpg" alt=""/>
					</div>				
				</li>			
				<li>
					<div class="theme pull-left" id="junglegreen_light">
						<img src="{$tpl_dir}/assets/images/themes/junglegreen_light.jpg" alt=""/>
					</div>				
				</li>
				<li>
					<div class="theme pull-left" id="junglegreen_light_sidebar">
						<img src="{$tpl_dir}/assets/images/themes/junglegreen_light_sidebar.jpg" alt=""/>
					</div>				
				</li>
				
				<li class="list-title clearfix">Fern</li>
				<li>
					<div class="theme pull-left" id="fern_dark">
						<img src="{$tpl_dir}/assets/images/themes/fern_dark.jpg" alt=""/>
					</div>				
				</li>			
				<li>
					<div class="theme pull-left" id="fern_light">
						<img src="{$tpl_dir}/assets/images/themes/fern_light.jpg" alt=""/>
					</div>				
				</li>
				<li>
					<div class="theme pull-left" id="fern_light_sidebar">
						<img src="{$tpl_dir}/assets/images/themes/fern_light_sidebar.jpg" alt=""/>
					</div>				
				</li>
				
				<li class="list-title clearfix">Sunglow</li>
				<li>
					<div class="theme pull-left" id="sunglow_dark">
						<img src="{$tpl_dir}/assets/images/themes/sunglow_dark.jpg" alt=""/>
					</div>				
				</li>			
				<li>
					<div class="theme pull-left" id="sunglow_light">
						<img src="{$tpl_dir}/assets/images/themes/sunglow_light.jpg" alt=""/>
					</div>				
				</li>
				<li>
					<div class="theme pull-left" id="sunglow_light_sidebar">
						<img src="{$tpl_dir}/assets/images/themes/sunglow_light_sidebar.jpg" alt=""/>
					</div>				
				</li>
				
				<li class="list-title clearfix">Regent Grey</li>
				<li>
					<div class="theme pull-left" id="regentgrey_dark">
						<img src="{$tpl_dir}/assets/images/themes/regentgrey_dark.jpg" alt=""/>
					</div>				
				</li>			
				<li>
					<div class="theme pull-left" id="regentgrey_light">
						<img src="{$tpl_dir}/assets/images/themes/regentgrey_light.jpg" alt=""/>
					</div>				
				</li>
				<li>
					<div class="theme pull-left" id="regentgrey_light_sidebar">
						<img src="{$tpl_dir}/assets/images/themes/regentgrey_light_sidebar.jpg" alt=""/>
					</div>				
				</li>
			</ul>	
		</div>
	</div>

--><a id="scrollTop" href="index1.htm#top"><i class="icon-arrow-up12"></i></a>	

<!-- Global scripts -->
<script src="{$tpl_dir}/js/jquery.js"></script>	
<script src="{$tpl_dir}/js/bootstrap.js"></script>
<script src="{$tpl_dir}/js/jquery.ui.js"></script>
<script src="{$tpl_dir}/js/nav.accordion.js"></script>	
<script src="{$tpl_dir}/js/hammerjs.js"></script>
<script src="{$tpl_dir}/js/jquery.hammer.js"></script>
<script src="{$tpl_dir}/js/scrollup.js"></script>	
<script src="{$tpl_dir}/js/jquery.slimscroll.js"></script>	
<script src="{$tpl_dir}/js/smart-resize.js"></script>
<script src="{$tpl_dir}/js/blockui.min.js"></script>		
<script src="{$tpl_dir}/js/wow.min.js"></script>					
<script src="{$tpl_dir}/js/fancybox.min.js"></script>
<script src="{$tpl_dir}/js/venobox.js"></script>
<script src="{$tpl_dir}/js/forms/uniform.min.js"></script>
<script src="{$tpl_dir}/js/forms/switchery.js"></script>
<script src="{$tpl_dir}/js/forms/select2.min.js"></script>	
<script src="{$tpl_dir}/js/core.js"></script>
<!-- /global scripts -->

    <link rel="stylesheet" href="{$tpl_dir}/assets/dist/summernote.css">
    <script type="text/javascript" src="{$tpl_dir}/assets/dist/summernote.js"></script>
    <script type="text/javascript" src="{$tpl_dir}/assets/dist/summernote-ext-video.js"></script> 


<!-- Page scripts -->
<script src="{$tpl_dir}/js/tables/datatables/datatables.min.js"></script>
<script src="{$tpl_dir}/js/pages/datatable_basic.js"></script>
<script src="https://www.google.com/jsapi"></script>
<script src="{$tpl_dir}/js/pages/dashboard_minimalistic.js"></script>
<script type="text/javascript" src="{$tpl_dir}/js/jquery.cropit.js"></script>  
    
    <link href="{$tpl_dir}/assets/datepick/jquery.datepick.css" rel="stylesheet">
    <script src="{$tpl_dir}/assets/datepick/jquery.plugin.js"></script>
    <script src="{$tpl_dir}/assets/datepick/jquery.datepick.js"></script>
    

    <script type="text/javascript">
        $(function () {           

            var isEdit = {if $isEdit eq true}true{else}false{/if};

            $('.tanggal').datepick({ dateFormat: 'dd-mm-yyyy' });
            
            var proses_upload_file = function(start, destination, button, input, pgbar, progress, label, filename, hidden, error, ext, preview) {

                var file = input.files[0];
                var bytes_per_chunk = 1024 * 1024 * 1;
                var size = file.size;
                var end = (start+bytes_per_chunk)>=size?size:(start+bytes_per_chunk);

                if(start==0) {
                    progress.attr( 'aria-valuenow', '0' );
                    progress.attr( 'aria-valuemin', '0' );
                    progress.attr( 'aria-valuemax', size );
                    progress.attr( 'style', 'width: 0%' );
                    label.text('0% Complete');
                    filename.hide();
                    preview.hide();
                    pgbar.show();
                    button.hide();
                    error.hide();
                }

                var data = new FormData();
                data.append('ax_file_input', file.slice(start, end));
                data.append('ax-file-path', '../../'+destination);
                data.append('ax-allow-ext', ext==undefined?'':ext);
                data.append('ax-file-name', file.name);
                data.append('ax-max-file-size', '10G');
                data.append('ax-start-byte', end);
                data.append('ax-last-chunk', end==size);

                $.ajax({
                    type: 'POST',
                    url: '{$homeurl}/includes/php/upload.php',
                    data: data,
                    cache: false,
                    dataType: 'json',
                    processData: false, // Don't process the files
                    contentType: false, // Set content type to false as jQuery will tell the server its a query string request
                    success: function(data, textStatus, jqXHR) {

                        progress.attr( 'aria-valuenow', end );
                        progress.attr( 'style', 'width: '+Math.round((end/size)*100)+'%' );
                        label.text(Math.round((end/size)*100)+'% Complete');

                        if(eval(data['status'])==-1) {
                            pgbar.hide();
                            error.text(data['info']);
                            error.show();

                            var extension = hidden.val().substr( (hidden.val().lastIndexOf('.') +1) );
                            switch(extension) {
                                case 'jpg':
                                case 'png':
                                case 'gif':
                                    //alert('was jpg png gif');
                                    preview.show();
                                    break;
                                case 'zip':
                                case 'rar':
                                    //alert('was zip rar');
                                    filename.show();
                                    break;
                                case 'pdf':
                                case 'doc':
                                case 'docx':
                                case 'xls':
                                case 'xlsx':                        
                                    //alert('was pdf doc docx xls xlsx');
                                    filename.show();
                                    break;
                                default:
                                    //alert('was unknown file type');
                                    filename.show();
                                    break;
                            }
                            button.show();
                            setTimeout(function() {
                                error.hide();
                            }, 3000);
                            return data;
                        }

                        if(end==size) {
                            setTimeout(function() {
                                pgbar.hide();
                                hidden.val(data['name']);

                                var extension = data['name'].substr( (data['name'].lastIndexOf('.') +1) );
                                switch(extension) {
                                    case 'jpg':
                                    case 'png':
                                    case 'gif':
                                        //alert('was jpg png gif');
                                        preview.attr('src', '{$homeurl}/'+destination+'/'+data['name']);
                                        preview.show();
                                        break;
                                    case 'zip':
                                    case 'rar':
                                        //alert('was zip rar');
                                        filename.html(data['name']);
                                        filename.show();
                                        break;
                                    case 'pdf':
                                    case 'doc':
                                    case 'docx':
                                    case 'xls':
                                    case 'xlsx':                        
                                        //alert('was pdf doc docx xls xlsx');
                                        filename.html(data['name']);
                                        filename.show();
                                        break;
                                    default:
                                        //alert('was unknown file type');
                                        filename.html(data['name']);
                                        filename.show();
                                        break;                                                                
                                }


                                button.show();
                            }, 1000);
                            return data;
                        } else {
                            return proses_upload_file(end, destination, button, input, pgbar, progress, label, filename, hidden, error, ext, preview);
                        }
                    }, 
                    error: function(jqXHR, textStatus, errorThrown) {
                        return proses_upload_file(start, destination, button, input, pgbar, progress, label, filename, hidden, error, ext, preview);
                    }
                });
            };
            
            $("#fileupload_gambar").change(function(event){
                proses_upload_file(0, 'uploads/kartanews', $('#upload_file_gambar'), this, $('#pgbar_file_gambar'), $('#pgbar_file_gambar_progress'), $('#pgbar_file_gambar_label'), $('#pgbar_file_gambar_filename'), $('#hidden_file_gambar_filename'), $('#alert_file_gambar'), 'jpg|png|gif', $('#preview_gambar_file_gambar'));
            });
            
            $('#upload_file_gambar').click(function(){
                $('#fileupload_gambar').trigger('click'); 
                return false;
            });
            
            
            
            
            $('.summernote').summernote({

                height: 170,

                toolbar: [

                    ['style', ['style']],

                    ['font', ['bold', 'italic', 'underline', 'clear']],

                    //['fontname', ['fontname']],

                    // ['fontsize', ['fontsize']], Still buggy

                    ['color', ['color']],

                    ['para', ['ul', 'ol', 'paragraph']],

                    // ['height', ['height']],

                    ['table', ['table']],

                    ['insert', ['link', 'picture', 'video']],

                    //['view', ['fullscreen' , 'codeview' ]],

                    ['help', ['help']]

                ]

            });



            $(".summernote").code('{if $isEdit eq true}{$data[0].konten}{/if}');
            
            function setErrorMessage(message) {

                $('#alert_error .alert').text(message);
                $('#alert_error').show('slow');
                setTimeout(function() {
                    $('#alert_error').hide('slow');
                }, 5000);

                $("body, html").animate({ 
                    scrollTop: $('#wrapper').offset().top 
                }, 600);
            }

            $('#btn_submit').click(function() {
               
                var data = new FormData();
                data.append('id', isEdit?'{$data[0].id}':'');
                data.append('judul', $('[name=judul]').val());
                data.append('kategori_id', $('[name=kategori_id]').val());
                data.append('is_new', $('[name=is_new]').is(':checked')?'1':'0');
                var tanggal = $('[name=tanggal]').val();
                data.append('tanggal', tanggal);
                data.append('konten', $('.summernote').summernote().code().replace(/\n/, '<br />'));
                data.append('filename_gambar', $('[name=hidden_file_gambar_filename]').val());

                setLoading(true);
                $.ajax({
                    type: 'POST',
                    url: isEdit?'update.php':'save.php',
                    data: data,
                    cache: false,
                    dataType: 'json',
                    processData: false, // Don't process the files
                    contentType: false, // Set content type to false as jQuery will tell the server its a query string request
                    success: function(data) {
                        if(data['success']) {
                            swal({
                              title: 'Sukses!',
                              text: 'Data Berhasil Disimpan',
                              type:'success',
                              timer: 3000
                            }).then(
                              function () {},
                              // handling the promise rejection
                              function (dismiss) {
                                    if (dismiss === 'timer') {
                                      console.log('I was closed by the timer')
                                    }
                              }
                            );							
                            window.location = 'list.php';                    

                        } else {
                            setLoading(false);
                            setErrorMessage(data['message']);                        
                        }
                    }, 

                    error: function() {
                        setLoading(false);
                        setErrorMessage('Kesalahan server. Mohon diulang kembali!');
                    }
                }); 
            });

            function setLoading(isLoading) {
                if(isLoading) {
                    $('#i_loading').show();
                    $('#btn_simpan').hide();
                    $('#btn_batal').hide();
                } else {
                    $('#i_loading').hide();
                    $('#btn_simpan').show(); 
                    $('#btn_batal').show();                    
                }
            }

        });

    </script>
</body>
</html>